<!doctype html>
<html lang="ru">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>tomashevi.ch</title>
        <meta name="description" content="Personal website of tomashevich" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;900&display=swap" rel="stylesheet" />
        <style>
            /* General styles */
            :root {
                --default: #2f4f4f;
                --primary: #007bff;
                --secondary: #87ceeb;
                --background: #e6f3ff;
                --spacing-unit: 1rem;
            }

            *,
            *::before,
            *::after {
                box-sizing: border-box;
            }

            html {
                font-size: 100%;
            }

            body {
                background: var(--background);
                color: var(--default);
                font-family: "Lato", sans-serif;
                font-weight: 400;
                line-height: 1.5;
                margin: 0;
                padding: 0;
                padding-bottom: 5rem; /* Add padding to the bottom to avoid content overlapping with the footer */
            }

            a {
                color: var(--primary);
                text-decoration: none;
                transition: all 0.3s ease-in-out;
            }

            h1,
            h2 {
                font-family: "Lato", sans-serif;
                font-weight: 900;
                color: var(--primary);
                margin: 0;
                margin-bottom: 1rem;
            }

            h1 {
                font-size: 2.5rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            p {
                margin: 0;
            }

            /* Layout */
            .container {
                width: 100%;
                max-width: 640px;
                margin: 0 auto;
                padding: 2rem;
                display: flex;
                flex-direction: column;
                gap: 3rem;
            }

            main {
                display: flex;
                flex-direction: column;
                gap: 3rem;
            }

            /* Components */
            .nav-links {
                display: flex;
                gap: 1.5rem;
            }

            .nav-link {
                color: var(--secondary);
                padding: 0.5rem 1rem;
                border-radius: 8px;
            }

            .nav-link:hover {
                color: var(--background);
                background-color: var(--primary);
            }

            .social-links {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 1rem;
            }

            .social-link {
                padding: 1rem;
                border: 1px solid var(--default);
                border-radius: 8px;
                transition:
                    background-color 0.3s,
                    border-color 0.3s;
                display: flex;
                align-items: center;
                text-decoration: none;
                gap: 1rem;
            }

            .social-link img {
                width: 32px;
                height: 32px;
                transition: filter 0.3s;
            }

            .social-link span {
                font-size: 1rem;
                color: var(--default);
                transition: color 0.3s;
            }

            .social-link:hover {
                background-color: var(--primary);
                border-color: var(--secondary);
            }

            .social-link:hover img {
                filter: brightness(0) invert(1);
            }

            .social-link:hover span {
                color: var(--background);
            }

            .email-user::after {
                content: "@";
            }

            .email-domain::after {
                content: ".";
            }

            .player-footer {
                position: fixed;
                bottom: 1rem;
                left: 0;
                right: 0;
                max-width: fit-content;
                margin: 0 auto;
                background-color: var(--background);
                border: 1px solid var(--default);
                border-radius: 1rem;
                padding: 1rem 1.5rem;
                backdrop-filter: blur(10px);
            }

            .player-container {
                display: flex;
                align-items: center;
                max-width: fit-content;
            }

            .player-button {
                background: none;
                border: none;
                cursor: pointer;
                padding: 0.5rem;
                color: var(--default);
                transition: color 0.3s;
                display: flex;
                align-items: center;
            }

            .player-button:hover {
                color: var(--primary);
            }

            .player-text {
                margin: 0 1.5rem;
                color: var(--default);
                font-size: 0.9rem;
                line-height: 1;
            }

            #pixel-battle-section {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
        </style>
    </head>
    <body>
        <section id="pixel-battle-section">
            <canvas id="pixel-canvas"></canvas>
        </section>
        <div class="container">
            <header>
                <nav class="nav-links" aria-label="Main navigation">
                    <a href="#" class="nav-link">home</a>
                    <a href="/projects" class="nav-link">projects</a>
                    <a href="/rewind" class="nav-link">rewinds</a>
                </nav>
            </header>
            <main>
                <section>
                    <h1>Hey there!</h1>
                    <p>im a he/him who loves making elegant solutions for interesting products</p>
                </section>
                <section>
                    <h2>You can find me here</h2>
                    <nav class="social-links" aria-label="Social media links">
                        <a href="https://t.me/tomashevich" target="_blank" rel="noopener noreferrer" class="social-link">
                            <img src="./icons/telegram.svg" alt="Telegram" />
                            <span>@tomashevich</span>
                        </a>
                        <a href="https://github.com/tomashevich" target="_blank" rel="noopener noreferrer" class="social-link">
                            <img src="./icons/github.svg" alt="GitHub" />
                            <span>@tomashevich</span>
                        </a>
                        <a href="https://youtube.com/@tomashevich" target="_blank" rel="noopener noreferrer" class="social-link">
                            <img src="./icons/youtube.svg" alt="YouTube" />
                            <span>@tomashevich</span>
                        </a>
                        <a href="#" id="email-link-handler" class="social-link">
                            <img src="./icons/mail.svg" alt="Email" />
                            <span><span class="email-user">me</span><span class="email-domain">tomashevi</span>ch</span>
                        </a>
                    </nav>
                </section>
            </main>
        </div>
        <footer class="player-footer">
            <div class="player-container">
                <a href="https://yandex.ru" target="_blank" rel="noopener noreferrer" class="player-button" aria-label="Previous">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <polygon points="11 19 2 12 11 5 11 19"></polygon>
                        <polygon points="22 19 13 12 22 5 22 19"></polygon>
                    </svg>
                </a>
                <div class="player-text">https://tomashevi.ch</div>
                <a href="https://google.com" target="_blank" rel="noopener noreferrer" class="player-button" aria-label="Next">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                    >
                        <polygon points="13 19 22 12 13 5 13 19"></polygon>
                        <polygon points="2 19 11 12 2 5 2 19"></polygon>
                    </svg>
                </a>
            </div>
        </footer>
        <script>
            class PixelBattle {
                constructor(canvasId, text, font) {
                    this.canvas = document.getElementById(canvasId);
                    if (!this.canvas) {
                        console.error(`Canvas with id "${canvasId}" not found.`);
                        return;
                    }
                    this.ctx = this.canvas.getContext("2d");
                    this.text = text;
                    this.pixelSize = 8;
                    this.font = font;

                    this.init();
                }

                init() {
                    this.setupCanvas();
                    this.createTextGrid();
                    this.drawGrid();
                    this.addEventListeners();
                }

                setupCanvas() {
                    const textCanvas = document.createElement("canvas");
                    const textCtx = textCanvas.getContext("2d");
                    textCtx.font = this.font;
                    const textMetrics = textCtx.measureText(this.text);

                    this.canvas.width = Math.ceil(textMetrics.width) + 2 * this.pixelSize;
                    this.canvas.height = 300;
                    this.canvas.style.width = `${this.canvas.width}px`;
                    this.canvas.style.height = `${this.canvas.height}px`;

                    textCanvas.width = this.canvas.width;
                    textCanvas.height = this.canvas.height;
                    textCtx.font = this.font;
                    textCtx.fillStyle = "#000";
                    textCtx.textAlign = "center";
                    textCtx.textBaseline = "middle";
                    textCtx.fillText(this.text, textCanvas.width / 2, textCanvas.height / 2);

                    this.textCanvas = textCanvas;
                    this.textCtx = textCtx;
                }

                createTextGrid() {
                    const gridWidth = Math.floor(this.canvas.width / this.pixelSize);
                    const gridHeight = Math.floor(this.canvas.height / this.pixelSize);
                    const imageData = this.textCtx.getImageData(0, 0, this.textCanvas.width, this.textCanvas.height);
                    const pixelData = imageData.data;
                    this.textPixels = new Array(gridHeight).fill(null).map(() => new Array(gridWidth).fill(false));

                    for (let y = 0; y < gridHeight; y++) {
                        for (let x = 0; x < gridWidth; x++) {
                            const pixelIndex = (y * this.pixelSize * this.textCanvas.width + x * this.pixelSize) * 4;
                            if (pixelData[pixelIndex + 3] > 0) {
                                this.textPixels[y][x] = true;
                            }
                        }
                    }
                }

                drawGrid() {
                    this.ctx.strokeStyle = "#ccc";
                    const gridWidth = this.textPixels[0].length;
                    const gridHeight = this.textPixels.length;

                    for (let y = 0; y < gridHeight; y++) {
                        for (let x = 0; x < gridWidth; x++) {
                            if (this.textPixels[y][x]) {
                                this.ctx.strokeRect(x * this.pixelSize, y * this.pixelSize, this.pixelSize, this.pixelSize);
                            }
                        }
                    }
                }

                addEventListeners() {
                    this.canvas.addEventListener("click", (e) => {
                        const rect = this.canvas.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;

                        const gridWidth = this.textPixels[0].length;
                        const pixelX = Math.floor(x / (rect.width / gridWidth));
                        const pixelY = Math.floor(y / (rect.height / this.textPixels.length));

                        if (this.textPixels[pixelY] && this.textPixels[pixelY][pixelX]) {
                            this.ctx.fillStyle = "red"; // or a color picker
                            this.ctx.fillRect(pixelX * this.pixelSize, pixelY * this.pixelSize, this.pixelSize, this.pixelSize);
                            this.ctx.strokeRect(pixelX * this.pixelSize, pixelY * this.pixelSize, this.pixelSize, this.pixelSize);
                        }
                    });
                }
            }

            const emailLink = document.getElementById("email-link-handler");
            emailLink.addEventListener("click", (e) => {
                e.preventDefault();
                const user = "me";
                const domain = "tomashevi.ch";
                window.location.href = `mailto:${user}@${domain}`;
            });

            new PixelBattle("pixel-canvas", "tomashevi.ch", "bold 200px Lato");
        </script>
    </body>
</html>
